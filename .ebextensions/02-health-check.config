option_settings:
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /health
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
  aws:autoscaling:updatepolicy:rollingupdate:
    RollingUpdateEnabled: true
    MaxBatchSize: 1
    MinInstancesInService: 1
    RollingUpdateType: Health

files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/99_restart_delayed.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      # Give the application time to start up before health checks
      sleep 30